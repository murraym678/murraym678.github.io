<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="gene30004.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
</script>

<script>

var imgScale = 6;
var mouseDown = false;

function imageZoom(imgID, resultID) {

  var img, lens, result, cx, cy;
  img = document.getElementById(imgID);
  result = document.getElementById(resultID);
  /*create lens:*/
  lens = document.createElement("DIV");
  lens.setAttribute("class", "img-zoom-lens");
  /*insert lens:*/
  img.parentElement.insertBefore(lens, img);
  /*calculate the ratio between result DIV and lens:*/
  cx = result.offsetWidth / lens.offsetWidth;
  cy = result.offsetHeight / lens.offsetHeight;
  /*set background properties for the result DIV:*/
  result.style.backgroundImage = "url('" + img.src + "')";

  realImgWidth = (img.width*imgScale);
  realImgHeight = (img.height*imgScale);

  bWidth = cx * img.width;
  bHeight = cx * img.height;

//  result.style.backgroundSize = bWidth + "px " + bHeight + "px";
  result.style.backgroundSize = bWidth + "px " + bHeight + "px";
  /*execute a function when someone moves the cursor over the image, or the lens:*/
  lens.addEventListener("mousemove", moveLens);
  img.addEventListener("mousemove", moveLens);
  /*and also for touch screens:*/
  lens.addEventListener("touchmove", moveLens);
  img.addEventListener("touchmove", moveLens);



  function moveLens(e) {
    var bPosX, bPosY, pos, x, y;

    /*prevent any other actions that may occur when moving over the image:*/
    e.preventDefault();
    /*get the cursor's x and y positions:*/
    pos = getCursorPos(e);
    /*calculate the position of the lens:*/
//    actualLensWidth = lens.offsetWidth*imgScale;
//    actualLensHeight = lens.offsetHeight*imgScale;
    actualLensWidth = lens.offsetWidth;
    actualLensHeight = lens.offsetHeight;
    x = pos.x - (actualLensWidth / 2);
    y = pos.y - (actualLensHeight / 2);
    /*prevent the lens from being positioned outside the image:*/
    if (x > img.width - actualLensWidth) {x = img.width - actualLensWidth;}
    if (x < 0) {x = 0;}
    if (y > img.height - actualLensHeight) {y = img.height - actualLensHeight;}
    if (y < 0) {y = 0;}
    /*set the position of the lens:*/
    lens.style.left = x + "px";
    lens.style.top = y + "px";
    /*display what the lens "sees":*/


    // the x,y coords are in the result_window
    // need to scale these up to the size of the bigger_window
    cx = result.offsetWidth / lens.offsetWidth;
    cy = result.offsetHeight / lens.offsetHeight;
    bPosX = x*cx;
    bPosY = y*cy;

/*
    document.getElementById("status").textContent = "pos in window="+pos.x.toString()+","+pos.y.toString();
    document.getElementById("status2").textContent = "topleft="+x.toString()+","+y.toString();
    document.getElementById("status3").textContent = "topleft="+bPosX.toString()+","+bPosY.toString();
*/
    result.style.backgroundPosition = "-" + bPosX + "px -" + bPosY + "px";
  }
  function getCursorPos(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return {x : x, y : y};
  }
}
  
  // Initiate zoom effect:
  $(document).ready(function() {
    });
  
  
  </script>      
  
</head>
<body>

  <h2>GENE30004 Practical - SLIDE 3</h2>

  <p class="TASK">TASK: Examine the embryos below to determine the identity of gene4.</p>
  <div class="GENOTYPE_STAIN">
  <h4>genotype b  =  gene3<sup>-</sup> / TM3 <sub>gene4-regulatory-element::lacZ </sub> </h4>
  <h4>1˚: Chicken-anti-betaGal</h4>
  <h4>2˚: Donkey-anti-Chicken-AP</h4>
  <h4> &nbsp</h4>
  </div>
  <div class="EXPLANATION">
  <p>This virtual slide shows embryos of genotypeB immunostained with a beta-galactosidase primary antibody. The secondary antibody is congugated to Alkaline Phosphatase (AP) which is producing a dark reaction product.</p>
  <p>Hence, the dark stain shows you where the lacZ gene is being expressed.
    Since the lacZ gene is under the control of the regulatory region of gene4
    it should recapitulate the expression pattern of the gene4 (it may not be exactly the same).
    So out of the 4 genes being used which one would be expected to have this expression pattern?</p>
    <p> QUESTIONS ARE A WORK IN PROGRESS.....</p>

    <p>Use your mouse to move the box around the slide. 
      The embryo under the box will be shown in more detail below.</p>    
  </div>
  

  <div class="img-zoom-container">
  <img id="myimage" src="images/slides_and_maps/genotypeB_bgal.jpg" width="282" height="156">
  <div id="myresult" class="img-zoom-result"></div>
</div>

  <script>
  imageZoom("myimage", "myresult");
  </script>

</body>
</html>
